このシステムの「色彩調和のご提案」ロジックは、インテリアデザインで広く使われている「70:25:5の法則」という配色テクニックを応用しています。これは、空間の色を3つの役割に分けることで、まとまりのある美しい印象を生み出す手法です。

---

### 色彩調和ロジックの3ステップ

#### 1. インテリア写真の分析：ベースカラーとアソートカラーの決定

まず、アップロードされた**お部屋の写真**から、空間の基本となる2色を抽出します。

*   **ベースカラー (70%)**:
    *   お部屋のカラーパレットの中で**最も面積の広い色**（`analysisResults.interior[0]`）を「ベースカラー」とします。
    *   これは、壁、床、天井など、お部屋の印象の大部分を占める背景色に相当します。
*   **アソートカラー (25%)**:
    *   次に面積の広い色（`analysisResults.interior[1]`）を「アソートカラー」（またはメインカラー）とします。
    *   これは、ソファ、カーテン、大きな家具など、お部屋のテーマや主役となる色です。

`color-thief`ライブラリは、画像内で使われている色の割合が多い順にカラーパレットを生成するため、この順番をそのまま利用して、空間の基本色を特定しています。

#### 2. 雛人形写真の分析：アクセントカラーの決定

次に、**お雛様の写真**から、空間にアクセントを加えるための1色を抽出します。

*   **アクセントカラー (5%)**:
    *   お雛様のカラーパレットの中から**最も彩度（色の鮮やかさ）が高い色**を「アクセントカラー」として選び出します。
    *   これは、`findMostSaturatedColor()` という関数で行っています。この関数は、パレット内の各色をHSL（色相・彩度・輝度）モデルに変換し、彩度（Saturation）の値が最も大きい色を見つけ出します。
    *   お雛様の持つ色の中で最も目を引く鮮やかな色を、空間を引き締めるための「差し色」として採用する、という考え方です。

#### 3. 調和案の生成と提示

最後に、上記3つの色を組み合わせて、具体的なアドバイスを生成します。

1.  **色の提示**:
    *   選ばれた3つの色（ベース、アソート、アクセント）を、それぞれの役割と配色の割合（70%, 25%, 5%）と共に、カラーチップで視覚的に表示します。
2.  **具体的なアドバイス**:
    *   「お部屋の基本色（ベース/アソート）はそのままに、お雛様から抽出した鮮やかなアクセントカラーを、クッションや花瓶、小物などで取り入れてみてはいかがでしょうか」という趣旨の具体的な提案文を生成します。
    *   これにより、利用者は「どの色を」「どのように」取り入れれば良いのかを直感的に理解でき、お雛様とお部屋のインテリアが調和した、洗練された空間を作るための具体的なアクションに繋げることができます。

---

このように、単に色を抽出するだけでなく、インテリアデザインの基本原則に基づいてそれぞれの色に役割を与え、実践的なアドバイスとして提示するのが、このシステムのコアロジックとなっています。
